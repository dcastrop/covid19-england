(this["webpackJsonpcovid19-england"]=this["webpackJsonpcovid19-england"]||[]).push([[0],{18:function(e,t,a){e.exports=a(53)},23:function(e,t,a){},25:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(12),i=a.n(r),o=(a(23),a(2)),c=a.n(o),u=a(4),d=a(13),l=a(14),h=a(16),f=a(15),p=a(17),m=(a(25),a(26)),v=["primary_care_trust","admin_district"],b=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={ready:!1,failed:!1,cases:new Map,postcodeInput:""},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"fetchDataSource",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t,a,n,s,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.ready){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("data_source.json");case 4:if(!(t=e.sent).ok){e.next=16;break}return e.next=8,t.json();case 8:for(i in a=e.sent,n=a.cases,s=a.last_update,r=new Map,n)r.set(i,n[i]);this.setState({ready:!0,lastUpdate:s,cases:r}),e.next=17;break;case 16:this.setState({failed:!0});case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.fetchDataSource().then((function(){return console.log("Data Loaded")}))}},{key:"findData",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t,a,n,s,r,i,o,u,d,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.lookup(this.state.postcode);case 2:if(t=e.sent,a=null===t||void 0===t?void 0:t.result){e.next=7;break}return this.setState({found:!1}),e.abrupt("return");case 7:for(n=!0,s=!1,r=void 0,e.prev=10,i=v[Symbol.iterator]();!(n=(o=i.next()).done);n=!0)(u=o.value)in a&&(d=a[u],this.state.cases.has(d)&&(l=this.state.cases.get(d),this.setState({myArea:d,myCaseNo:l,found:!0})));e.next=18;break;case 14:e.prev=14,e.t0=e.catch(10),s=!0,r=e.t0;case 18:e.prev=18,e.prev=19,n||null==i.return||i.return();case 21:if(e.prev=21,!s){e.next=24;break}throw r;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}}),e,this,[[10,14,18,26],[19,,21,25]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){if(this.state.ready){if(this.state.postcode)if(void 0===this.state.found)this.findData().then((function(){return console.log("Data Found")}));else if(!1===this.state.found)return s.a.createElement("div",null,s.a.createElement("div",null,"Failed to find information about postcode ".concat(this.state.postcode)),s.a.createElement("form",{onSubmit:this.handleReset.bind(this)},s.a.createElement("input",{type:"submit",value:"Reset"})));return this.render_main()}return this.state.failed?s.a.createElement("div",null,"Error loading data"):s.a.createElement("div",null,"Loading...")}},{key:"handlePostcode",value:function(e){this.setState({postcodeInput:e.target.value})}},{key:"handleSubmit",value:function(){this.setState({postcode:this.state.postcodeInput})}},{key:"handleReset",value:function(){this.setState({postcode:void 0,found:void 0})}},{key:"render_main",value:function(){return this.state.postcode&&this.state.myArea&&this.state.myCaseNo?s.a.createElement("div",null,s.a.createElement("div",null,"You're at ".concat(this.state.myArea,". There are ").concat(this.state.myCaseNo," COVID-19 case(s) in your area.")),s.a.createElement("form",{onSubmit:this.handleReset.bind(this)},s.a.createElement("input",{type:"submit",value:"Reset"})),s.a.createElement("div",null,"Last Updated: ".concat(this.state.lastUpdate," "),s.a.createElement("a",{href:"https://www.gov.uk/government/publications/coronavirus-covid-19-number-of-cases-in-england/coronavirus-covid-19-number-of-cases-in-england"},"Source"))):this.state.postcode?s.a.createElement("div",null,"Loading..."):s.a.createElement("form",{onSubmit:this.handleSubmit.bind(this)},s.a.createElement("input",{type:"text",value:this.state.postcodeInput,onChange:this.handlePostcode.bind(this)}),s.a.createElement("input",{type:"submit",value:"Find"}))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.dd5a17c7.chunk.js.map